<!DOCTYPE html>
<meta charset="UTF-8" />
<link rel="shortcut icon" href="/favicon_icon/favicon.ico" />
<link rel="stylesheet" href="style.css" />
<body>
  <div class="wild_west" id="map" style="overflow-x:auto;"></div>
  <input id="players_turn" />
</body>

<script>
  var playersAtStart = 4;

  function reDrawMap() {
    let table = '<table cellpadding="0" cellspacing="0">';
    table += "<tr>";
    // top
    for (w = 0; w < gameMap.map.length; w++) {
      if (w != gameMap.map.length - 1) {
        table += "<td class='r1_background'>";
      } else {
        table += "<td class='h1_background'>";
      }

      if (gameMap.map[w][1].length < 1) {
        table += "<div class='r'></div>";
      } else {
        table += "<div class='r'>";
        gameMap.map[w][1].forEach(player => {
          table += "<img src='/sprites/";
          table += player;
          table += ".png'>";
        });
        table += "</div>";
      }

      table += "</td>";
    }
    table += "</tr>";
    table += "<tr>";
    // middle
    for (w = 0; w < gameMap.map.length; w++) {
      if (w != gameMap.map.length - 1) {
        table += "<td class='r0_background'>";
      } else {
        table += "<td class='h0_background'>";
      }

      if (gameMap.map[w][0].length < 1) {
        table += "<div class='r'></div>";
      } else {
        table += "<div class='r'>";
        gameMap.map[w][0].forEach(player => {
          console.log(player);
          table += "<img src='/sprites/";
          table += player;
          table += ".png'>";
        });
        table += "</div>";
      }

      table += "</td>";
    }
    table += "</tr>";
    table += "<tr>";
    // bottom
    for (w = 0; w < gameMap.map.length; w++) {
      if (w != gameMap.map.length - 1) {
        table += "<td class='bottom_background'></td>";
      } else {
        table += "<td class='h_bottom_background'>";
      }
    }
    table += "</tr>";
    table += "</table>";
    document.getElementById("map").innerHTML = table;

    document.getElementById("players_turn").value = gameMap.players_turn;
  }

  var moves_arr = [];
  moves_arr.length = 0;

  function game(mv) {
    var wait_time = 1000;
    mv.forEach(el => {
      setTimeout(() => {
        if (el === 0) {
          gameMap.fire();
        } else if (el === 1) {
          gameMap.move();
        } else if (el === 2) {
          gameMap.turnAround();
        } else if (el === 3) {
          gameMap.climb();
        }
      }, wait_time);
      wait_time += 2000;
    });
  }
</script>
<script type="text/javascript" src="backend.js"></script>
